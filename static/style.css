:root {
    --bg-color: #131314;
    --sidebar-color: #1E1F20;
    --surface-color: #2D2E2F;
    /* Input box, hover states */
    --text-primary: #E3E3E3;
    --text-secondary: #C4C7C5;
    --accent-blue: #A8C7FA;
    --gradient-gemini: linear-gradient(90deg, #4285F4, #9B72CB, #D96570);
    --border-color: #444746;
    --user-msg-bg: #2D2E2F;
    --bot-msg-bg: transparent;
}

/* Image Preview */
.image-preview-container {
    position: absolute;
    bottom: 80px;
    left: 20px;
    background: var(--surface-color);
    padding: 10px;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
    display: flex;
    align-items: flex-start;
    gap: 10px;
    z-index: 100;
}

.image-preview-container img {
    max-height: 100px;
    border-radius: 8px;
}

.remove-image-btn {
    background: #FF4444;
    color: white;
    border: none;
    border-radius: 50%;
    width: 24px;
    height: 24px;
    cursor: pointer;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Roboto', 'Inter', sans-serif;
    /* Gemini uses Product Sans-like font, Roboto is close */
}

body {
    background-color: var(--bg-color);
    color: var(--text-primary);
    height: 100vh;
    display: flex;
    overflow: hidden;
    font-size: 16px;
    line-height: 1.5;
}

.app-container {
    display: flex;
    width: 100%;
    height: 100%;
}

/* --- Sidebar --- */
.sidebar {
    width: 280px;
    background-color: var(--sidebar-color);
    display: flex;
    flex-direction: column;
    padding: 12px;
    transition: transform 0.3s ease;
    z-index: 100;
}

.sidebar-header {
    padding: 8px 12px;
    margin-bottom: 12px;
}

.menu-btn {
    background: none;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 8px;
    border-radius: 50%;
    transition: background 0.2s;
}

.menu-btn:hover {
    background-color: rgba(255, 255, 255, 0.1);
}

.new-chat-btn {
    background-color: #1A1A1C;
    /* Darker background */
    color: #E3E3E3;
    border: 1px solid rgba(255, 255, 255, 0.1);
    /* Subtle border */
    border-radius: 20px;
    /* Pill shape */
    padding: 10px 16px;
    display: flex;
    align-items: center;
    gap: 12px;
    cursor: pointer;
    font-size: 0.9rem;
    font-weight: 500;
    transition: background 0.2s, box-shadow 0.2s;
    margin-bottom: 24px;
    width: fit-content;
}

.new-chat-btn:hover {
    background-color: #2D2E2F;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}

.sidebar-section {
    flex: 1;
    overflow-y: auto;
    padding-right: 4px;
    /* Space for scrollbar */
}

.section-title {
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--text-secondary);
    margin: 0 12px 8px 12px;
}

.history-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 12px;
    border-radius: 20px;
    color: var(--text-primary);
    cursor: pointer;
    transition: background 0.2s;
    font-size: 0.9rem;
    white-space: nowrap;
    overflow: hidden;
}

.history-item:hover {
    background-color: #2D2E2F;
}

.text-truncate {
    overflow: hidden;
    text-overflow: ellipsis;
}

.sidebar-footer {
    border-top: 1px solid var(--border-color);
    padding-top: 12px;
    margin-top: 12px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.user-profile {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px;
    border-radius: 8px;
    cursor: pointer;
    flex: 1;
}

.user-profile:hover {
    background-color: #2D2E2F;
}

.avatar {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: linear-gradient(135deg, #1A73E8, #8E24AA);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.9rem;
    font-weight: bold;
    color: white;
}

.settings-btn {
    padding: 8px;
    color: var(--text-secondary);
    cursor: pointer;
    border-radius: 50%;
    transition: background 0.2s;
}

.settings-btn:hover {
    background-color: #2D2E2F;
}


/* --- Main Content --- */
.main-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    position: relative;
    background-color: var(--bg-color);
}

.top-bar {
    padding: 16px 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    /* On mobile, this will hold the menu trigger too */
}

.model-name {
    font-size: 1.1rem;
    font-weight: 500;
    color: var(--text-secondary);
    display: flex;
    align-items: center;
    gap: 6px;
}

.model-name::after {
    content: 'â–¼';
    font-size: 0.7rem;
    opacity: 0.7;
}

/* Chat Area */
.chat-container {
    flex: 1;
    overflow-y: auto;
    padding: 0 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.chat-history {
    width: 100%;
    max-width: 800px;
    display: flex;
    /* Important for welcome screen centering */
    flex-direction: column;
    flex: 1;
    padding-bottom: 20px;
    /* Space before input area */
}

/* Welcome Screen */
.welcome-screen {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 40px 0;
    width: 100%;
}

.greeting {
    margin-bottom: 48px;
}

.gradient-text {
    font-size: 3.5rem;
    font-weight: 600;
    background: var(--gradient-gemini);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    display: block;
    line-height: 1.2;
}

.sub-text {
    font-size: 3.5rem;
    font-weight: 600;
    color: #444746;
    /* Muted dark */
    display: block;
    line-height: 1.2;
}

/* Suggestion Cards */
.suggestions-grid {
    display: flex;
    gap: 12px;
    overflow-x: auto;
    padding-bottom: 10px;
    /* Hide scrollbar visually but allow scroll */
    scrollbar-width: none;
}

.suggestions-grid::-webkit-scrollbar {
    display: none;
}

.suggestion-card {
    background-color: var(--sidebar-color);
    border-radius: 12px;
    padding: 16px;
    width: 200px;
    min-width: 180px;
    height: 180px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    cursor: pointer;
    transition: background 0.2s;
    position: relative;
}

.suggestion-card:hover {
    background-color: #2D2E2F;
}

.suggestion-card p {
    font-size: 1rem;
    color: var(--text-primary);
    line-height: 1.4;
}

.suggestion-card .icon {
    align-self: flex-end;
    background-color: #131314;
    padding: 8px;
    border-radius: 50%;
    font-size: 1.2rem;
}


/* Messages */
.message {
    display: flex;
    gap: 16px;
    margin-bottom: 24px;
    animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.message.user {
    justify-content: flex-end;
}

.message.user .content {
    background-color: var(--user-msg-bg);
    border-radius: 18px 18px 4px 18px;
    /* Chat bubble style */
}

.message.bot .content {
    background-color: transparent;
    padding-left: 0;
}

/* User avatar in chat is hidden for user messages usually in Gemini, but we can keep it strict or just textual. 
   Gemini shows User avatar on the right, Bot icon on diff line. */

.message-avatar {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
}

.message.bot .message-avatar {
    background: #4EACF3;
    /* Gemini Blue-ish */
    background-image: linear-gradient(135deg, #4EACF3 0%, #1a73e8 100%);
    box-shadow: 0 0 10px #4EACF3, 0 0 20px rgba(78, 172, 243, 0.5);
    /* No image */
}

.message.bot .message-avatar i {
    display: none;
    /* Hide FontAwesome if using image */
}

/* If image fails, let's just use a gradient circle */
.message.bot .message-avatar.fallback {
    background: var(--gradient-gemini);
}

.message .content {
    max-width: 80%;
    padding: 12px 18px;
    border-radius: 4px 18px 18px 18px;
    line-height: 1.6;
    font-size: 1rem;
}


/* --- Input Area --- */
.input-area-wrapper {
    background-color: var(--bg-color);
    padding: 0 20px 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    /* Gradient overlay top if needed, but Gemini is flat */
}

.input-container {
    width: 100%;
    max-width: 800px;
    position: relative;
    background-color: var(--sidebar-color);
    border-radius: 40px;
    /* More rounded */
    padding: 12px 20px;
    /* Bigger padding */
    display: flex;
    align-items: center;
    gap: 12px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    /* Floating shadow */
    border: 1px solid rgba(255, 255, 255, 0.1);
    /* Subtle border */
    transition: all 0.3s ease;
}

.input-container:focus-within {
    box-shadow: 0 0 20px rgba(78, 172, 243, 0.3), 0 4px 25px rgba(0, 0, 0, 0.4);
    /* Glow effect */
    border-color: rgba(78, 172, 243, 0.5);
    background-color: #232425;
    /* Slightly lighter on focus */
}

/* We are styling input-container directly as the box now, effectively replacing .input-box wrapper usage if any exists (our HTML uses input-container as parent of inputs) */

.input-container input[type="text"] {
    flex: 1;
    background: transparent;
    border: none;
    color: var(--text-primary);
    font-size: 1.1rem;
    /* Bigger font */
    outline: none;
    padding: 8px 0;
}

.input-container .icon-btn,
.input-container .mic-btn,
.input-container .send-btn {
    background: transparent;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 12px;
    /* Bigger touch target */
    border-radius: 50%;
    transition: background 0.2s, color 0.2s, transform 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
}

.input-container .icon-btn:hover,
.input-container .mic-btn:hover,
.input-container .send-btn:hover {
    background-color: rgba(255, 255, 255, 0.1);
    color: var(--text-primary);
    transform: scale(1.1);
    /* Subtle zoom */
}

.send-btn {
    /* Send button usually distinctive if text is present, but flat is fine */
    cursor: pointer;
}

.disclaimer {
    font-size: 0.75rem;
    color: var(--text-secondary);
    margin-top: 10px;
    text-align: center;
}


/* --- Voice Overlay --- */
.voice-indicator {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 250px;
    /* Half screen overlay style */
    background: linear-gradient(to top, #131314 80%, transparent);
    z-index: 200;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding-bottom: 40px;
    transition: transform 0.3s ease-in-out;
}

.voice-indicator.hidden {
    transform: translateY(100%);
    /* We don't use display: none so we can animate slide up */
}

.voice-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
}

.visualizer {
    display: flex;
    gap: 8px;
    height: 40px;
    align-items: center;
}

.bar {
    width: 8px;
    height: 10px;
    background: var(--gradient-gemini);
    border-radius: 4px;
    animation: fluctuate 1s infinite;
}

.bar:nth-child(2) {
    animation-delay: 0.1s;
}

.bar:nth-child(3) {
    animation-delay: 0.2s;
}

.bar:nth-child(4) {
    animation-delay: 0.3s;
}

@keyframes fluctuate {

    0%,
    100% {
        height: 10px;
    }

    50% {
        height: 40px;
    }
}

.close-btn {
    position: absolute;
    top: 40px;
    /* Adjust based on gradient start */
    right: 20px;
    background: transparent;
    border: none;
    color: white;
    cursor: pointer;
}


/* Image Preview */
.image-preview-container {
    position: absolute;
    bottom: 80px;
    left: 20px;
    background: var(--surface);
    padding: 10px;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
    display: flex;
    align-items: flex-start;
    gap: 10px;
    z-index: 100;
}

.image-preview-container img {
    max-height: 100px;
    border-radius: 8px;
}

.remove-image-btn {
    background: #FF4444;
    color: white;
    border: none;
    border-radius: 50%;
    width: 24px;
    height: 24px;
    cursor: pointer;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Mobile Responsiveness */
@media (max-width: 768px) {
    .sidebar {
        position: absolute;
        height: 100%;
        transform: translateX(-100%);
    }

    .sidebar.open {
        transform: translateX(0);
        box-shadow: 2px 0 10px rgba(0, 0, 0, 0.5);
    }

    .chat-container {
        padding: 0 16px;
    }
}

.gradient-text,
.sub-text {
    font-size: 2.5rem;
}

/* --- Auth / Login Styles --- */
.auth-container {
    text-align: center;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
    margin: auto;
    /* Center in body flex */
}

.auth-title {
    font-size: 2rem;
    font-weight: 600;
    margin-bottom: 20px;
    background: var(--gradient-gemini);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.auth-form {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.form-group {
    text-align: left;
}

.form-group label {
    color: var(--text-secondary);
    font-size: 0.9rem;
    margin-bottom: 8px;
    display: block;
}

.form-input {
    width: 100%;
    padding: 12px;
    background-color: #2D2E2F;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    color: var(--text-primary);
    font-size: 1rem;
    outline: none;
    transition: border-color 0.2s;
}

.form-input:focus {
    border-color: #A8C7FA;
}

.auth-btn {
    background: var(--gradient-gemini);
    color: white;
    border: none;
    padding: 12px;
    border-radius: 24px;
    font-size: 1rem;
    font-weight: 500;
    cursor: pointer;
    margin-top: 10px;
    transition: opacity 0.2s;
}

.auth-btn:hover {
    opacity: 0.9;
}

.auth-link {
    margin-top: 20px;
    color: var(--text-secondary);
    font-size: 0.9rem;
}

.auth-link a {
    color: #A8C7FA;
    text-decoration: none;
}

.auth-link a:hover {
    text-decoration: underline;
}

.alert {
    padding: 10px;
    border-radius: 8px;
    margin-bottom: 16px;
    font-size: 0.9rem;
}

.alert-error {
    background-color: rgba(255, 68, 68, 0.1);
    color: #FF4444;
    border: 1px solid rgba(255, 68, 68, 0.2);
}

.alert-success {
    background-color: rgba(75, 181, 67, 0.1);
    color: #4BB543;
    border: 1px solid rgba(75, 181, 67, 0.2);
}